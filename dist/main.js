(()=>{"use strict";class e extends Phaser.Scene{constructor(){super({key:"menu"}),this.start,this.score,this.music}preload(){this.load.image("background","./assets/menu_bg.jpg"),this.load.image("start","./assets/start.png"),this.load.image("score","./assets/score.png"),this.load.audio("gas","assets/Music/gas_long.ogg")}create(){this.music=this.sound.add("gas"),this.music.setVolume(.4),this.music.play(),this.add.sprite(0,0,"background").setOrigin(0,0),this.start=this.add.image(370,210,"start"),this.start.setScale(.2),this.start.setInteractive({useHandCursor:!0}),this.start.on("pointerdown",(()=>this.clickButton())),this.score=this.add.image(370,440,"score"),this.score.setScale(.3),this.score.setInteractive({useHandCursor:!0}),this.score.on("pointerdown",(()=>this.highscore()))}update(){}clickButton(){this.scene.switch("map1")}highscore(){this.scene.switch("score")}}const t=e;class s extends Phaser.Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"bullet")}fire(e,t,s){this.body.setAllowGravity(!1),this.body.reset(e,t),this.setActive(!0),this.setVisible(!0),s?this.setVelocityX(500):s||this.setVelocityX(-500)}preUpdate(e,t){super.preUpdate(e,t),(this.x>=800||this.x<=0)&&(this.setActive(!1),this.setVisible(!1))}}class i extends Phaser.Physics.Arcade.Group{constructor(e){super(e.physics.world,e),this.createMultiple({classType:s,frameQuantity:30,active:!1,visible:!1,key:"bullet"})}shootBullet(e,t,s){const i=this.getFirstDead(!1);i&&i.fire(e,t,s)}}class a extends Phaser.Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"ennemyBullet")}fire(e,t,s){this.body.setAllowGravity(!1),this.body.reset(e,t),this.setActive(!0),this.setVisible(!0),s?this.setVelocityX(300):s||this.setVelocityX(-300)}preUpdate(e,t){super.preUpdate(e,t),(this.x>=800||this.x<=0)&&(this.setActive(!1),this.setVisible(!1))}}class n extends Phaser.Physics.Arcade.Group{constructor(e){super(e.physics.world,e),this.createMultiple({classType:a,frameQuantity:10,active:!1,visible:!1,key:"ennemyBullet"})}shootBullet(e,t,s){const i=this.getFirstDead(!1);i&&i.fire(e,t,s)}}class h extends Phaser.Scene{constructor(){super({key:"map1"}),this.player,this.cursors,this.faceRight,this.ennemyFaceRight,this.PlayerBulletGroup,this.EnnemyBulletGroup,this.bulletDelay,this.ennemyBulletDelay,this.ennemy,this.timerText,this.timerTimeEvent,this.completedTime,this.playedTime,this.inGameBoolean,this.lvlOneSpawnPoint,this.nameLvlMap,this.nbrDeath,this.deathCountText}init(){}preload(){this.load.image("tempBackground","assets/Map/Wasteland_Sky.png"),this.load.spritesheet("gunner","assets/TeamGunner/CHARACTER_SPRITES/Black/Gunner_Black_Full_Line2.png",{frameWidth:28,frameHeight:35}),this.load.image("bullet","assets/TeamGunner/EXTRAS/bullet.png"),this.load.spritesheet("ennemy","assets/TeamGunner/CHARACTER_SPRITES/Red/spritesheet_red.png",{frameWidth:28,frameHeight:35}),this.load.image("ennemyBullet","assets/TeamGunner/EXTRAS/MuzzleFLash.png"),this.load.image("map_assets","assets/Map/Wasteland.png"),this.load.tilemapTiledJSON("map1","assets/Map/Map2.json")}create(){this.createBackground(),this.createCharacter(),this.createAnims(),this.createALvl(),this.setUpDeathCount(),this.createSpawnPointLvl(180,380,400,750,300,500,160,770),this.playedTime=this.time,this.SetUpTimer(),this.createEnnemy(),this.createAnimsEnnemy(),this.PlayerBulletGroup=new i(this),this.EnnemyBulletGroup=new n(this),this.physics.add.overlap(this.ennemy,this.PlayerBulletGroup,this.enemyHit,null,this),this.physics.add.overlap(this.player,this.EnnemyBulletGroup,this.playerHit,null,this),this.physics.add.collider(this.EnnemyBulletGroup,this.mapLayer,this.wallHit,null,this),this.physics.add.collider(this.PlayerBulletGroup,this.mapLayer,this.wallHit,null,this),this.createDelay(),this.cursors=this.input.keyboard.createCursorKeys(),console.log(this)}update(){this.movements(),this.ennemyMovements(),this.shoot(),this.Ennemyshoot(),this.checkingDelay(),this.checkingEnnemyDelay()}createBackground(){this.add.image(400,280,"tempBackground")}createCharacter(){this.player=this.physics.add.sprite(35,450,"gunner"),this.faceRight=!0,this.player.setCollideWorldBounds(!0)}createALvl(){this.createLvlOneMap(),this.createLvlOneTileSet(),this.createLvlOnePlateform()}createLvlOneMap(){this.map=this.make.tilemap({key:"map1"})}createLvlOneTileSet(){this.tileset=this.map.addTilesetImage("map_assets_js","map_assets")}createLvlOnePlateform(){this.mapLayer=this.map.createStaticLayer(0,this.tileset,0,0),this.mapLayer.setCollisionByExclusion([-1]),this.physics.add.collider(this.player,this.mapLayer)}createSpawnPointLvl(e,t,s,i,a,n,h,l){this.lvlOneSpawnPoint=new Array,this.lvlOneSpawnPoint.push(e),this.lvlOneSpawnPoint.push(t),this.lvlOneSpawnPoint.push(s),this.lvlOneSpawnPoint.push(i),this.lvlOneSpawnPoint.push(a),this.lvlOneSpawnPoint.push(n),this.lvlOneSpawnPoint.push(h),this.lvlOneSpawnPoint.push(l)}createEnnemy(){this.ennemy=this.physics.add.sprite(this.lvlOneSpawnPoint.pop(),this.lvlOneSpawnPoint.pop(),"ennemy"),this.faceRight=!0,this.ennemy.setCollideWorldBounds(!0),this.physics.add.collider(this.ennemy,this.mapLayer)}createDelay(){this.bulletDelay=10,this.ennemyBulletDelay=60}checkingDelay(){this.bulletDelay<=9&&this.bulletDelay++}checkingEnnemyDelay(){this.ennemyBulletDelay<=59&&this.ennemyBulletDelay++}movements(){this.cursors.right.isDown?(this.faceRight=!0,this.player.setVelocityX(160),this.player.body.blocked.down&&this.player.anims.play("right",!0)):this.cursors.left.isDown?(this.faceRight=!1,this.player.setVelocityX(-160),this.player.body.blocked.down&&this.player.anims.play("left",!0)):(this.player.setVelocityX(0),this.faceRight?this.player.anims.play("idleRight",!0):this.player.anims.play("idleLeft",!0)),this.cursors.up.isDown&&this.player.body.blocked.down&&this.player.setVelocityY(-250),this.player.body.blocked.down||(this.faceRight?this.player.anims.play("jumpRight",!0):this.player.anims.play("jumpLeft",!0),this.cursors.down.isDown&&this.player.setVelocityY(800))}ennemyMovements(){this.player.x-this.ennemy.x>0?(this.ennemyFaceRight=!0,this.ennemy.anims.play("idleEnnemyRight",!0)):(this.ennemyFaceRight=!1,this.ennemy.anims.play("idleEnnemyLeft",!0))}shoot(){this.cursors.space.isDown&&10==this.bulletDelay&&(this.PlayerBulletGroup.shootBullet(this.player.x,this.player.y,this.faceRight),this.bulletDelay=0)}Ennemyshoot(){60==this.ennemyBulletDelay&&(this.EnnemyBulletGroup.shootBullet(this.ennemy.x,this.ennemy.y,this.ennemyFaceRight),this.ennemyBulletDelay=0)}playerHit(e,t){this.nbrDeath++,this.deathCountText.setText("Deaths: "+this.nbrDeath),e.x=35,e.y=400,t.setActive(!1),t.setVisible(!1)}enemyHit(e,t){if(console.log("ennemy hit"),this.lvlOneSpawnPoint.length<=0)return console.log(this.playedTime+"time before switch"),void this.scene.start("map2",{time:this.playedTime,death:this.nbrDeath});e.x=this.lvlOneSpawnPoint.pop(),e.y=this.lvlOneSpawnPoint.pop(),t.setActive(!1),t.setVisible(!1)}wallHit(e,t){e.setActive(!1),e.setVisible(!1),e.x=0,e.y=0}createAnims(){this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("gunner",{start:14,end:19}),frameRate:10}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("gunner",{start:20,end:25}),frameRate:10}),this.anims.create({key:"idleRight",frames:this.anims.generateFrameNumbers("gunner",{start:0,end:4}),frameRate:10}),this.anims.create({key:"idleLeft",frames:this.anims.generateFrameNumbers("gunner",{start:5,end:9}),frameRate:10}),this.anims.create({key:"jumpRight",frames:this.anims.generateFrameNumbers("gunner",{start:10,end:11}),frameRate:10}),this.anims.create({key:"jumpLeft",frames:this.anims.generateFrameNumbers("gunner",{start:12,end:13}),frameRate:10})}createAnimsEnnemy(){this.anims.create({key:"idleEnnemyRight",frames:this.anims.generateFrameNumbers("ennemy",{start:0,end:4}),frameRate:10}),this.anims.create({key:"idleEnnemyLeft",frames:this.anims.generateFrameNumbers("ennemy",{start:5,end:9}),frameRate:10})}setUpDeathCount(){this.nbrDeath=0,this.deathCountText=this.add.text(700,32,"Deaths: "+this.nbrDeath)}SetUpTimer(){this.inGameBoolean=!0,this.playedTime=0,this.timerText=this.add.text(32,32,"Timer: "+this.formatTime(this.playedTime)),this.timerTimeEvent=this.time.addEvent({delay:1e3,callback:this.onEvent,callbackScope:this,loop:!0})}formatTime(e){var t=e%60;return`${Math.floor(e/60)}:${t=t.toString().padStart(2,"0")}`}onEvent(){!0===this.inGameBoolean&&(this.playedTime+=1,this.timerText.setText("Timer: "+this.formatTime(this.playedTime)))}stopAndSaveTimer(){this.inGameBoolean=!1,this.completedTime=this.playedTime}getTimer(){return this.playedTime}end(){}}const l=h;class r extends Phaser.Scene{constructor(){super({key:"map2"}),this.player,this.cursors,this.faceRight,this.ennemyFaceRight,this.PlayerBulletGroup,this.EnnemyBulletGroup,this.bulletDelay,this.ennemyBulletDelay,this.ennemy,this.timerText,this.timerTimeEvent,this.completedTime,this.playedTime=this.time,this.inGameBoolean,this.lvlOneSpawnPoint,this.nameLvlMap,this.nbrDeath,this.deathCountText}init(e){this.playedTime=e.time,this.nbrDeath=e.death}preload(){this.load.image("tempBackground","assets/Map/Wasteland_Sky.png"),this.load.spritesheet("gunner","assets/TeamGunner/CHARACTER_SPRITES/Black/Gunner_Black_Full_Line2.png",{frameWidth:28,frameHeight:35}),this.load.image("bullet","assets/TeamGunner/EXTRAS/bullet.png"),this.load.spritesheet("ennemy","assets/TeamGunner/CHARACTER_SPRITES/Red/spritesheet_red.png",{frameWidth:28,frameHeight:35}),this.load.image("ennemyBullet","assets/TeamGunner/EXTRAS/MuzzleFLash.png"),this.load.image("map_assets","assets/Map/Wasteland.png"),this.load.tilemapTiledJSON("map2","assets/Map/Map1.json")}create(){this.createBackground(),this.createCharacter(),this.createAnims(),this.createALvl(),this.setUpDeathCount(),this.createSpawnPointLvl(180,380,400,750,300,500,150,600),this.SetUpTimer(),this.createEnnemy(),this.createAnimsEnnemy(),this.PlayerBulletGroup=new i(this),this.EnnemyBulletGroup=new n(this),this.physics.add.overlap(this.ennemy,this.PlayerBulletGroup,this.enemyHit,null,this),this.physics.add.overlap(this.player,this.EnnemyBulletGroup,this.playerHit,null,this),this.physics.add.collider(this.EnnemyBulletGroup,this.mapLayer,this.wallHit,null,this),this.physics.add.collider(this.PlayerBulletGroup,this.mapLayer,this.wallHit,null,this),this.createDelay(),this.cursors=this.input.keyboard.createCursorKeys(),console.log(this)}update(){this.movements(),this.ennemyMovements(),this.shoot(),this.Ennemyshoot(),this.checkingDelay(),this.checkingEnnemyDelay()}createBackground(){this.add.image(400,280,"tempBackground")}createCharacter(){this.player=this.physics.add.sprite(35,400,"gunner"),this.faceRight=!0,this.player.setCollideWorldBounds(!0)}createALvl(){this.createLvlOneMap(),this.createLvlOneTileSet(),this.createLvlOnePlateform()}createLvlOneMap(){this.map=this.make.tilemap({key:"map2"})}createLvlOneTileSet(){this.tileset=this.map.addTilesetImage("map_assets_js","map_assets")}createLvlOnePlateform(){this.mapLayer=this.map.createStaticLayer(0,this.tileset,0,0),this.mapLayer.setCollisionByExclusion([-1]),this.physics.add.collider(this.player,this.mapLayer)}createSpawnPointLvl(e,t,s,i,a,n,h,l){this.lvlOneSpawnPoint=new Array,this.lvlOneSpawnPoint.push(e),this.lvlOneSpawnPoint.push(t),this.lvlOneSpawnPoint.push(s),this.lvlOneSpawnPoint.push(i),this.lvlOneSpawnPoint.push(a),this.lvlOneSpawnPoint.push(n),this.lvlOneSpawnPoint.push(h),this.lvlOneSpawnPoint.push(l)}createEnnemy(){this.ennemy=this.physics.add.sprite(this.lvlOneSpawnPoint.pop(),this.lvlOneSpawnPoint.pop(),"ennemy"),this.faceRight=!0,this.ennemy.setCollideWorldBounds(!0),this.physics.add.collider(this.ennemy,this.mapLayer)}createDelay(){this.bulletDelay=10,this.ennemyBulletDelay=60}checkingDelay(){this.bulletDelay<=9&&this.bulletDelay++}checkingEnnemyDelay(){this.ennemyBulletDelay<=59&&this.ennemyBulletDelay++}movements(){this.cursors.right.isDown?(this.faceRight=!0,this.player.setVelocityX(160),this.player.body.blocked.down&&this.player.anims.play("right",!0)):this.cursors.left.isDown?(this.faceRight=!1,this.player.setVelocityX(-160),this.player.body.blocked.down&&this.player.anims.play("left",!0)):(this.player.setVelocityX(0),this.faceRight?this.player.anims.play("idleRight",!0):this.player.anims.play("idleLeft",!0)),this.cursors.up.isDown&&this.player.body.blocked.down&&this.player.setVelocityY(-250),this.player.body.blocked.down||(this.faceRight?this.player.anims.play("jumpRight",!0):this.player.anims.play("jumpLeft",!0),this.cursors.down.isDown&&this.player.setVelocityY(800))}ennemyMovements(){this.player.x-this.ennemy.x>0?(this.ennemyFaceRight=!0,this.ennemy.anims.play("idleEnnemyRight",!0)):(this.ennemyFaceRight=!1,this.ennemy.anims.play("idleEnnemyLeft",!0))}shoot(){this.cursors.space.isDown&&10==this.bulletDelay&&(this.PlayerBulletGroup.shootBullet(this.player.x,this.player.y,this.faceRight),this.bulletDelay=0)}Ennemyshoot(){60==this.ennemyBulletDelay&&(this.EnnemyBulletGroup.shootBullet(this.ennemy.x,this.ennemy.y,this.ennemyFaceRight),this.ennemyBulletDelay=0)}playerHit(e,t){this.nbrDeath++,this.deathCountText.setText("Deaths: "+this.nbrDeath),e.x=35,e.y=400,t.setActive(!1),t.setVisible(!1)}enemyHit(e,t){console.log("ennemy hit"),this.lvlOneSpawnPoint.length<=0?this.scene.start("map3",{time:this.playedTime,death:this.nbrDeath}):(e.x=this.lvlOneSpawnPoint.pop(),e.y=this.lvlOneSpawnPoint.pop(),t.setActive(!1),t.setVisible(!1))}wallHit(e,t){e.setActive(!1),e.setVisible(!1),e.x=0,e.y=0}createAnims(){this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("gunner",{start:14,end:19}),frameRate:10}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("gunner",{start:20,end:25}),frameRate:10}),this.anims.create({key:"idleRight",frames:this.anims.generateFrameNumbers("gunner",{start:0,end:4}),frameRate:10}),this.anims.create({key:"idleLeft",frames:this.anims.generateFrameNumbers("gunner",{start:5,end:9}),frameRate:10}),this.anims.create({key:"jumpRight",frames:this.anims.generateFrameNumbers("gunner",{start:10,end:11}),frameRate:10}),this.anims.create({key:"jumpLeft",frames:this.anims.generateFrameNumbers("gunner",{start:12,end:13}),frameRate:10})}createAnimsEnnemy(){this.anims.create({key:"idleEnnemyRight",frames:this.anims.generateFrameNumbers("ennemy",{start:0,end:4}),frameRate:10}),this.anims.create({key:"idleEnnemyLeft",frames:this.anims.generateFrameNumbers("ennemy",{start:5,end:9}),frameRate:10})}setUpDeathCount(){this.deathCountText=this.add.text(700,32,"Deaths: "+this.nbrDeath)}SetUpTimer(){this.inGameBoolean=!0,console.log(this.playedTime),this.timerText=this.add.text(32,32,"Timer: "+this.formatTime(this.playedTime)),this.timerTimeEvent=this.time.addEvent({delay:1e3,callback:this.onEvent,callbackScope:this,loop:!0})}formatTime(e){var t=e%60;return`${Math.floor(e/60)}:${t=t.toString().padStart(2,"0")}`}onEvent(){!0===this.inGameBoolean&&(this.playedTime+=1,this.timerText.setText("Timer: "+this.formatTime(this.playedTime)))}stopAndSaveTimer(){this.inGameBoolean=!1,this.completedTime=this.playedTime}end(){}}const m=r;class o extends Phaser.Scene{constructor(){super({key:"map3"}),this.player,this.cursors,this.faceRight,this.ennemyFaceRight,this.PlayerBulletGroup,this.EnnemyBulletGroup,this.bulletDelay,this.ennemyBulletDelay,this.ennemy,this.timerText,this.timerTimeEvent,this.completedTime,this.playedTime,this.inGameBoolean,this.lvlOneSpawnPoint,this.nameLvlMap,this.nbrDeath,this.deathCountText}init(e){this.playedTime=e.time,this.nbrDeath=e.death}preload(){this.load.image("tempBackground","assets/Map/Wasteland_Sky.png"),this.load.spritesheet("gunner","assets/TeamGunner/CHARACTER_SPRITES/Black/Gunner_Black_Full_Line2.png",{frameWidth:28,frameHeight:35}),this.load.image("bullet","assets/TeamGunner/EXTRAS/bullet.png"),this.load.spritesheet("ennemy","assets/TeamGunner/CHARACTER_SPRITES/Red/spritesheet_red.png",{frameWidth:28,frameHeight:35}),this.load.image("ennemyBullet","assets/TeamGunner/EXTRAS/MuzzleFLash.png"),this.load.image("map_assets","assets/Map/Wasteland.png"),this.load.tilemapTiledJSON("map3","assets/Map/Map3.json")}create(){this.createBackground(),this.createCharacter(),this.createAnims(),this.createALvl(),this.setUpDeathCount(),this.createSpawnPointLvl(180,380,400,750,300,500,150,600),this.SetUpTimer(),this.createEnnemy(),this.createAnimsEnnemy(),this.PlayerBulletGroup=new i(this),this.EnnemyBulletGroup=new n(this),this.physics.add.overlap(this.ennemy,this.PlayerBulletGroup,this.enemyHit,null,this),this.physics.add.overlap(this.player,this.EnnemyBulletGroup,this.playerHit,null,this),this.physics.add.collider(this.EnnemyBulletGroup,this.mapLayer,this.wallHit,null,this),this.physics.add.collider(this.PlayerBulletGroup,this.mapLayer,this.wallHit,null,this),this.createDelay(),this.cursors=this.input.keyboard.createCursorKeys(),console.log(this)}update(){this.movements(),this.ennemyMovements(),this.shoot(),this.Ennemyshoot(),this.checkingDelay(),this.checkingEnnemyDelay()}createBackground(){this.add.image(400,280,"tempBackground")}createCharacter(){this.player=this.physics.add.sprite(35,450,"gunner"),this.faceRight=!0,this.player.setCollideWorldBounds(!0)}createALvl(){this.createLvlOneMap(),this.createLvlOneTileSet(),this.createLvlOnePlateform()}createLvlOneMap(){this.map=this.make.tilemap({key:"map3"})}createLvlOneTileSet(){this.tileset=this.map.addTilesetImage("map_assets_js","map_assets")}createLvlOnePlateform(){this.mapLayer=this.map.createStaticLayer(0,this.tileset,0,0),this.mapLayer.setCollisionByExclusion([-1]),this.physics.add.collider(this.player,this.mapLayer)}createSpawnPointLvl(e,t,s,i,a,n,h,l){this.lvlOneSpawnPoint=new Array,this.lvlOneSpawnPoint.push(e),this.lvlOneSpawnPoint.push(t),this.lvlOneSpawnPoint.push(s),this.lvlOneSpawnPoint.push(i),this.lvlOneSpawnPoint.push(a),this.lvlOneSpawnPoint.push(n),this.lvlOneSpawnPoint.push(h),this.lvlOneSpawnPoint.push(l)}createEnnemy(){this.ennemy=this.physics.add.sprite(this.lvlOneSpawnPoint.pop(),this.lvlOneSpawnPoint.pop(),"ennemy"),this.faceRight=!0,this.ennemy.setCollideWorldBounds(!0),this.physics.add.collider(this.ennemy,this.mapLayer)}createDelay(){this.bulletDelay=10,this.ennemyBulletDelay=60}checkingDelay(){this.bulletDelay<=9&&this.bulletDelay++}checkingEnnemyDelay(){this.ennemyBulletDelay<=59&&this.ennemyBulletDelay++}movements(){this.cursors.right.isDown?(this.faceRight=!0,this.player.setVelocityX(160),this.player.body.blocked.down&&this.player.anims.play("right",!0)):this.cursors.left.isDown?(this.faceRight=!1,this.player.setVelocityX(-160),this.player.body.blocked.down&&this.player.anims.play("left",!0)):(this.player.setVelocityX(0),this.faceRight?this.player.anims.play("idleRight",!0):this.player.anims.play("idleLeft",!0)),this.cursors.up.isDown&&this.player.body.blocked.down&&this.player.setVelocityY(-250),this.player.body.blocked.down||(this.faceRight?this.player.anims.play("jumpRight",!0):this.player.anims.play("jumpLeft",!0),this.cursors.down.isDown&&this.player.setVelocityY(800))}ennemyMovements(){this.player.x-this.ennemy.x>0?(this.ennemyFaceRight=!0,this.ennemy.anims.play("idleEnnemyRight",!0)):(this.ennemyFaceRight=!1,this.ennemy.anims.play("idleEnnemyLeft",!0))}shoot(){this.cursors.space.isDown&&10==this.bulletDelay&&(this.PlayerBulletGroup.shootBullet(this.player.x,this.player.y,this.faceRight),this.bulletDelay=0)}Ennemyshoot(){60==this.ennemyBulletDelay&&(this.EnnemyBulletGroup.shootBullet(this.ennemy.x,this.ennemy.y,this.ennemyFaceRight),this.ennemyBulletDelay=0)}playerHit(e,t){this.nbrDeath++,this.deathCountText.setText("Deaths: "+this.nbrDeath),e.x=35,e.y=400,t.setActive(!1),t.setVisible(!1)}enemyHit(e,t){console.log("ennemy hit"),this.lvlOneSpawnPoint.length<=0?this.scene.start("endMenu",{time:this.playedTime}):(e.x=this.lvlOneSpawnPoint.pop(),e.y=this.lvlOneSpawnPoint.pop(),t.setActive(!1),t.setVisible(!1))}wallHit(e,t){e.setActive(!1),e.setVisible(!1),e.x=0,e.y=0}createAnims(){this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("gunner",{start:14,end:19}),frameRate:10}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("gunner",{start:20,end:25}),frameRate:10}),this.anims.create({key:"idleRight",frames:this.anims.generateFrameNumbers("gunner",{start:0,end:4}),frameRate:10}),this.anims.create({key:"idleLeft",frames:this.anims.generateFrameNumbers("gunner",{start:5,end:9}),frameRate:10}),this.anims.create({key:"jumpRight",frames:this.anims.generateFrameNumbers("gunner",{start:10,end:11}),frameRate:10}),this.anims.create({key:"jumpLeft",frames:this.anims.generateFrameNumbers("gunner",{start:12,end:13}),frameRate:10})}createAnimsEnnemy(){this.anims.create({key:"idleEnnemyRight",frames:this.anims.generateFrameNumbers("ennemy",{start:0,end:4}),frameRate:10}),this.anims.create({key:"idleEnnemyLeft",frames:this.anims.generateFrameNumbers("ennemy",{start:5,end:9}),frameRate:10})}setUpDeathCount(){this.deathCountText=this.add.text(700,32,"Deaths: "+this.nbrDeath)}SetUpTimer(){this.inGameBoolean=!0,this.timerText=this.add.text(32,32,"Timer: "+this.formatTime(this.playedTime)),this.timerTimeEvent=this.time.addEvent({delay:1e3,callback:this.onEvent,callbackScope:this,loop:!0})}formatTime(e){var t=e%60;return`${Math.floor(e/60)}:${t=t.toString().padStart(2,"0")}`}onEvent(){!0===this.inGameBoolean&&(this.playedTime+=1,this.timerText.setText("Timer: "+this.formatTime(this.playedTime)))}stopAndSaveTimer(){this.inGameBoolean=!1,this.completedTime=this.playedTime}end(){}}const p=o;class y extends Phaser.Scene{constructor(){super({key:"score"})}preload(){this.load.image("score","./assets/score.png")}create(){this.add.image(370,150,"score"),this.getHighScore(),this.menu=this.add.text(300,480,"RETOUR AU MENU"),this.menu.setInteractive({useHandCursor:!0}),this.menu.on("pointerdown",(()=>this.clickButton()))}clickButton(){this.scene.switch("menu")}getHighScore(){const e=new XMLHttpRequest;e.open("GET","http://localhost:8000/users",!1),e.send();var t=280;const s=JSON.parse(e.responseText);for(let e of s){let s=e.name;console.log(s+" name");let i=e.score;console.log(i+" score"),this.add.text(400,t,`name : ${s} et score : ${i}`),t+=20}}}const c=y;class d extends Phaser.Scene{constructor(){super({key:"endMenu"}),this.playedTime,this.player,this.myScore,this.menu}init(e){this.playedTime=e.time}preload(){this.load.image("score","./assets/score.png"),this.load.html("form","./form.html")}create(){this.add.image(370,150,"score"),this.menu=this.add.text(300,480,"TABLEAU DES SCORES"),this.menu.setInteractive({useHandCursor:!0}),this.menu.on("pointerdown",(()=>this.clickButton()));var e=this.add.dom(400,250).createFromCache("form");this.add.text(400,280,"ZYVA TRICHES PAS T AS FAIT : "+this.playedTime+"!!"),console.log(""),e.addListener("click"),e.on("click",(function(e){"playButton"===e.target.name&&(this.player=this.getChildByName("player"),""!==this.player.value?(this.removeListener("click"),this.setVisible(!1)):this.scene.tweens.add({targets:text,alpha:.2,duration:250,ease:"Power3",yoyo:!0}))}))}clickButton(){this.scene.start("score")}postMyScore(){try{const e={method:"POST",body:JSON.stringify({score:this.myScore,player:this.player}),headers:{"Content-Type":"application/json"}};fetch("http://localhost:8000/user",e)}catch(e){console.error("error:",e)}}}const u=d;var g=new l,v=new t,f=new m,T=new p,b=new c,S=new u,w={type:Phaser.AUTO,width:800,height:560,physics:{default:"arcade",arcade:{gravity:{y:300},debug:!1}},parent:"sr",dom:{createContainer:!0}},R=new Phaser.Game(w);console.log(w),R.scene.add("menu",v),R.scene.add("map1",g),R.scene.add("map2",f),R.scene.add("map3",T),R.scene.add("score",b),R.scene.add("endMenu",S),R.scene.start("menu")})();